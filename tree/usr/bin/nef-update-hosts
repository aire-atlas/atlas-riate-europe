#!/bin/bash

configFile=/etc/hosts
configDir=${configFile}.d

. /usr/share/bash-nef/util

comment="# GENERATED BY SYSCONF"

[ -d $configDir ] || nef_fatal "Config dir does not exist: $configDir"

nef_log "Generating: $configFile"
echo "$comment" >$configFile

for file in `find -L $configDir -type f -name '*.hosts'`; do
    nef_log "Including content from: $file"
    echo -e "\n# $file" >>$configFile
    cat $file >>$configFile
done

nef_log "Done."
